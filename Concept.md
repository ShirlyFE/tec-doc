## IaaS，PaaS，SaaS 的区别:
越来越多的软件，开始采用云服务。
云服务只是一个统称，可以分成三大类。

IaaS：基础设施服务，Infrastructure-as-a-service
PaaS：平台服务，Platform-as-a-service
SaaS：软件服务，Software-as-a-service

它们有什么区别呢？
IBM 的软件架构师 Albert Barron 曾经使用披萨作为比喻，解释这个问题。David Ng 进一步引申，让它变得更准确易懂。
请设想你是一个餐饮业者，打算做披萨生意。

你可以从头到尾，自己生产披萨，但是这样比较麻烦，需要准备的东西多，因此你决定外包一部分工作，采用他人的服务。你有三个方案。
（1）方案一：IaaS
他人提供厨房、炉子、煤气，你使用这些基础设施，来烤你的披萨。

（2）方案二：PaaS
除了基础设施，他人还提供披萨饼皮。

你只要把自己的配料洒在饼皮上，让他帮你烤出来就行了。也就是说，你要做的就是设计披萨的味道（海鲜披萨或者鸡肉披萨），他人提供平台服务，让你把自己的设计实现。

（3）方案三：SaaS
他人直接做好了披萨，不用你的介入，到手的就是一个成品。你要做的就是把它卖出去，最多再包装一下，印上你自己的 Logo。

上面的三种方案，自己承担的工作量（上图蓝色部分）越来越少，IaaS > PaaS > SaaS。

SaaS 是软件的开发、管理、部署都交给第三方，不需要关心技术问题，可以拿来即用。普通用户接触到的互联网服务，几乎都是 SaaS，下面是一些例子。
客户管理服务 Salesforce
团队协同服务 Google Apps
储存服务 Box
储存服务 Dropbox
社交服务 Facebook / Twitter / Instagram
PaaS 提供软件部署平台（runtime），抽象掉了硬件和操作系统细节，可以无缝地扩展（scaling）。开发者只需要关注自己的业务逻辑，不需要关注底层。下面这些都属于 PaaS。
Heroku
Google App Engine
OpenShift
IaaS 是云服务的最底层，主要提供一些基础资源。它与 PaaS 的区别是，用户需要自己控制底层，实现基础设施的使用逻辑。下面这些都属于 IaaS。
Amazon EC2
Digital Ocean
RackSpace Cloud




## Trunk Based Development
Trunk Based Development，缩写为TBD，中文就是基于主干的开发。

Google 采用"主干开发"（trunk-based development）。代码一般提交到主干的头部。这样保证了所有用户看到的都是同一份代码的最新版本。
"主干开发"避免了合并分支时的麻烦。谷歌一般不采用分支开发，分支只用来发布。大多数时候，发布分支是主干某个时点的快照。以后的除错和功能增强，都是提交到主干，必要时 cherry-pick 到发布分支。与主干长期并行的开发分支，在谷歌极少见。
由于不采用"分支开发"，谷歌引入新功能，一般在代码中使用开关控制。这避免了另起一个分支，也使得通过配置切换功能变得容易，一旦新功能发生故障，很容易切换回旧功能。等到新功能稳定，再彻底删除旧代码。谷歌有类似A/B测试的路由算法，评估代码的表现，由于存在配置开关，这种测试很容易实现。

单一代码仓库主要有以下优点。
（1）统一的版本
整个公司的代码，有统一的版本和路径，不存在找不到文件的最新版本这样的问题。
（2）广泛的代码共享和复用
任何人都可以浏览和使用全公司的代码，这大大促进了代码的共享和复用。
（3）简化的依赖管理
如果你是库文件或者 API 的作者，因为所有人的代码都在一个库里面，所以很容易找到依赖你的所有下游代码。
每当代码变动，所有依赖你的代码都会自动构建。如果有大量的构建失败，那么系统会自动撤销这次提交。这样也保证了所有代码依赖的都是最新版本，避免依赖不同的版本所导致的冲突。
另外，由于代码的边界很清楚，所以不会发生循环依赖。而且，API的作者也很容易发现，别人怎么使用他的API。
（4）原子性变动
由于每次代码变动所导致的影响，都在一个仓库里面，所以都属于原子性的变动。因此，很容易撤销，或者预先测试它所造成的影响。
为了防止错误提交，谷歌引入了"预提交"（即在提交之前，先分析一下依赖它的代码是否会构建失败）。
（5）大规模代码析构
单一代码仓库为查找和分析代码，提供了巨大的方便。
Google的静态分析引擎 Tricorder 定时运行，对代码进行分析。比如，C++ 11 标准公布以后，很容易找到所有需要改进的变量声明语句，进行性能优化。该引擎还对许多错误提供"一键修正"的功能，同时产出大量的统计数据。
此外，编译器团队也会对不同语言的所有代码进行分析，找出不合理的代码和过时的API。
四、缺点
单一代码仓库的主要缺点是，所有工具都必须自己写，因为市场上没有能够管理这种规模的代码仓库的软件。
五、总结
单一代码仓库，适合提倡透明开放的大型软件公司，不适合小公司和有大量私密代码的公司。

